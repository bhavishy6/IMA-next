{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../middleware/database';\n\nvar moment = require('moment');\n\nmoment().format('L');\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get(async (req, res) => {\n  const {} = req.query;\n  var dbQuery = {};\n  let doc = await req.db.collection('inventory').find(dbQuery).toArray();\n  console.log(doc);\n  res.json(doc);\n  res.end();\n});\nhandler.post(async (req, res) => {\n  let data = req.body;\n  data = JSON.parse(data);\n  let doc = await req.db.collection('inventory').updateOne({\n    name: data.name\n  }, {\n    $set: data\n  }, {\n    upsert: true\n  });\n  res.json({\n    message: 'ok'\n  });\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/bhavi/Documents/Coding/IMA-next/pages/api/inventory.js"],"names":["nextConnect","middleware","moment","require","format","handler","use","get","req","res","query","dbQuery","doc","db","collection","find","toArray","console","log","json","end","post","data","body","JSON","parse","updateOne","name","$set","upsert","message"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;;AAEA,IAAIC,MAAM,GAAIC,OAAO,CAAC,QAAD,CAArB;;AACAD,MAAM,GAAGE,MAAT,CAAgB,GAAhB;AAEA,MAAMC,OAAO,GAAGL,WAAW,EAA3B;AACAK,OAAO,CAACC,GAAR,CAAYL,UAAZ;AAEAI,OAAO,CAACE,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC5B,QAAM,KAAOD,GAAG,CAACE,KAAjB;AACA,MAAIC,OAAO,GAAG,EAAd;AAEA,MAAIC,GAAG,GAAG,MAAMJ,GAAG,CAACK,EAAJ,CAAOC,UAAP,CAAkB,WAAlB,EAA+BC,IAA/B,CAAoCJ,OAApC,EAA6CK,OAA7C,EAAhB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYN,GAAZ;AACAH,EAAAA,GAAG,CAACU,IAAJ,CAASP,GAAT;AACAH,EAAAA,GAAG,CAACW,GAAJ;AACH,CARD;AAUAf,OAAO,CAACgB,IAAR,CAAa,OAAOb,GAAP,EAAYC,GAAZ,KAAoB;AAC7B,MAAIa,IAAI,GAAGd,GAAG,CAACe,IAAf;AACAD,EAAAA,IAAI,GAAGE,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAP;AACA,MAAIV,GAAG,GAAG,MAAMJ,GAAG,CAACK,EAAJ,CAAOC,UAAP,CAAkB,WAAlB,EAA+BY,SAA/B,CAAyC;AAACC,IAAAA,IAAI,EAAEL,IAAI,CAACK;AAAZ,GAAzC,EAA4D;AAACC,IAAAA,IAAI,EAAEN;AAAP,GAA5D,EAA0E;AAACO,IAAAA,MAAM,EAAE;AAAT,GAA1E,CAAhB;AAEApB,EAAAA,GAAG,CAACU,IAAJ,CAAS;AAACW,IAAAA,OAAO,EAAE;AAAV,GAAT;AACH,CAND;AAQA,eAAezB,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport middleware from '../../middleware/database';\r\n\r\nvar moment  = require('moment')\r\nmoment().format('L'); \r\n\r\nconst handler = nextConnect();\r\nhandler.use(middleware);\r\n\r\nhandler.get(async (req, res) => {\r\n    const {  } = req.query;\r\n    var dbQuery = {};\r\n\r\n    let doc = await req.db.collection('inventory').find(dbQuery).toArray();\r\n    console.log(doc);\r\n    res.json(doc);\r\n    res.end();\r\n});\r\n\r\nhandler.post(async (req, res) => {\r\n    let data = req.body\r\n    data = JSON.parse(data);\r\n    let doc = await req.db.collection('inventory').updateOne({name: data.name}, {$set: data}, {upsert: true})\r\n\r\n    res.json({message: 'ok'});\r\n})\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}