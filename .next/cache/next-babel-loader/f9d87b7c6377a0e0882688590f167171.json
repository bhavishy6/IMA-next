{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../middleware/database';\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get(async (req, res) => {\n  console.log(JSON.stringify(req)); // let doc = await req.db.collection('sales').find()\n  // console.log(doc);\n  // res.json(doc);\n  // res.end();\n\n  var cursor = await req.db.collection('sales').find(); // Execute the each command, triggers for each document\n\n  cursor.each(function (err, item) {\n    // If the item is null then the cursor is exhausted/empty and closed\n    if (item == null) {\n      db.close(); // you may not want to close the DB if you have more code....\n\n      return;\n    } // otherwise, do something with the item\n\n  });\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/bhavi/Documents/Coding/IMA-next/pages/api/sales.js"],"names":["nextConnect","middleware","handler","use","get","req","res","console","log","JSON","stringify","cursor","db","collection","find","each","err","item","close"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AAEA,MAAMC,OAAO,GAAGF,WAAW,EAA3B;AAEAE,OAAO,CAACC,GAAR,CAAYF,UAAZ;AAEAC,OAAO,CAACE,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC5BC,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeL,GAAf,CAAZ,EAD4B,CAE5B;AACA;AACA;AACA;;AAEA,MAAIM,MAAM,GAAG,MAAMN,GAAG,CAACO,EAAJ,CAAOC,UAAP,CAAkB,OAAlB,EAA2BC,IAA3B,EAAnB,CAP4B,CAQ5B;;AACAH,EAAAA,MAAM,CAACI,IAAP,CAAY,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC7B;AACA,QAAIA,IAAI,IAAI,IAAZ,EAAkB;AACdL,MAAAA,EAAE,CAACM,KAAH,GADc,CACF;;AACZ;AACH,KAL4B,CAM7B;;AACH,GAPD;AAQH,CAjBD;AAmBA,eAAehB,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport middleware from '../../middleware/database';\r\n\r\nconst handler = nextConnect();\r\n\r\nhandler.use(middleware);\r\n\r\nhandler.get(async (req, res) => {\r\n    console.log(JSON.stringify(req));\r\n    // let doc = await req.db.collection('sales').find()\r\n    // console.log(doc);\r\n    // res.json(doc);\r\n    // res.end();\r\n\r\n    var cursor = await req.db.collection('sales').find();\r\n    // Execute the each command, triggers for each document\r\n    cursor.each(function (err, item) {\r\n        // If the item is null then the cursor is exhausted/empty and closed\r\n        if (item == null) {\r\n            db.close(); // you may not want to close the DB if you have more code....\r\n            return;\r\n        }\r\n        // otherwise, do something with the item\r\n    });\r\n});\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}