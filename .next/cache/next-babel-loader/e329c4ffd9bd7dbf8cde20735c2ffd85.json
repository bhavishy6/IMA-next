{"ast":null,"code":"import nextConnect from 'next-connect';\nimport middleware from '../../middleware/database';\n\nvar moment = require('moment');\n\nmoment().format('L');\nconst handler = nextConnect();\nhandler.use(middleware);\nhandler.get(async (req, res) => {\n  const {} = req.query;\n  var dbQuery = {};\n  let doc = await req.db.collection('inventory').find(dbQuery).toArray();\n  console.log(\"inventory found: \" + doc);\n  res.json(doc);\n  res.end();\n});\nhandler.post(async (req, res) => {\n  let data = req.body;\n  data = JSON.parse(data);\n  let doc = await req.db.collection('inventory').insertOne(data, function (err, res) {\n    if (err) throw err;\n    console.log(\"1 document inserted\");\n    db.close();\n  });\n});\nexport default handler;","map":{"version":3,"sources":["C:/Users/bhavi/Documents/Coding/IMA-next/pages/api/inventory.js"],"names":["nextConnect","middleware","moment","require","format","handler","use","get","req","res","query","dbQuery","doc","db","collection","find","toArray","console","log","json","end","post","data","body","JSON","parse","insertOne","err","close"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;;AAEA,IAAIC,MAAM,GAAIC,OAAO,CAAC,QAAD,CAArB;;AACAD,MAAM,GAAGE,MAAT,CAAgB,GAAhB;AAEA,MAAMC,OAAO,GAAGL,WAAW,EAA3B;AACAK,OAAO,CAACC,GAAR,CAAYL,UAAZ;AAEAI,OAAO,CAACE,GAAR,CAAY,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC5B,QAAM,KAAOD,GAAG,CAACE,KAAjB;AACA,MAAIC,OAAO,GAAG,EAAd;AAEA,MAAIC,GAAG,GAAG,MAAMJ,GAAG,CAACK,EAAJ,CAAOC,UAAP,CAAkB,WAAlB,EAA+BC,IAA/B,CAAoCJ,OAApC,EAA6CK,OAA7C,EAAhB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBN,GAAlC;AACAH,EAAAA,GAAG,CAACU,IAAJ,CAASP,GAAT;AACAH,EAAAA,GAAG,CAACW,GAAJ;AACH,CARD;AAUAf,OAAO,CAACgB,IAAR,CAAa,OAAOb,GAAP,EAAYC,GAAZ,KAAoB;AAC7B,MAAIa,IAAI,GAAGd,GAAG,CAACe,IAAf;AACAD,EAAAA,IAAI,GAAGE,IAAI,CAACC,KAAL,CAAWH,IAAX,CAAP;AACA,MAAIV,GAAG,GAAG,MAAMJ,GAAG,CAACK,EAAJ,CAAOC,UAAP,CAAkB,WAAlB,EAA+BY,SAA/B,CAAyCJ,IAAzC,EAA+C,UAASK,GAAT,EAAclB,GAAd,EAAmB;AAC9E,QAAIkB,GAAJ,EAAS,MAAMA,GAAN;AACTV,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAL,IAAAA,EAAE,CAACe,KAAH;AACD,GAJa,CAAhB;AAKH,CARD;AAUA,eAAevB,OAAf","sourcesContent":["import nextConnect from 'next-connect';\r\nimport middleware from '../../middleware/database';\r\n\r\nvar moment  = require('moment')\r\nmoment().format('L'); \r\n\r\nconst handler = nextConnect();\r\nhandler.use(middleware);\r\n\r\nhandler.get(async (req, res) => {\r\n    const {  } = req.query;\r\n    var dbQuery = {};\r\n\r\n    let doc = await req.db.collection('inventory').find(dbQuery).toArray();\r\n    console.log(\"inventory found: \" + doc);\r\n    res.json(doc);\r\n    res.end();\r\n});\r\n\r\nhandler.post(async (req, res) => {\r\n    let data = req.body\r\n    data = JSON.parse(data);\r\n    let doc = await req.db.collection('inventory').insertOne(data, function(err, res) {\r\n        if (err) throw err;\r\n        console.log(\"1 document inserted\");\r\n        db.close();\r\n      });\r\n})\r\n\r\nexport default handler;"]},"metadata":{},"sourceType":"module"}